<!DOCTYPE html>
<html>
<head>
	<title>Exploitants en activités particulières au moyen d'aéronefs télé-pilotés</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!--CSS Leaflet*/-->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
	<!--CSS Leaflet-MiniMap : https://github.com/Norkart/Leaflet-MiniMap-->
	<link rel="stylesheet" href="http://igeo.fr/leaflet/plugins/MiniMap/Control.MiniMap.css" />
	<!--CSS Leaflet.MousePosition : https://github.com/ardhi/Leaflet.MousePosition-->
	<link rel="stylesheet" href="http://igeo.fr/leaflet/plugins/MousePosition/L.Control.MousePosition.css" />
	<!--CSS Leaflet.GeoSearch : https://github.com/smeijer/L.GeoSearch-->
	<link rel="stylesheet" href="http://igeo.fr/leaflet/plugins/GeoSearch/css/l.geosearch.css" />
	<!--CSS Leaflet.MarkerCluster : https://github.com/Leaflet/Leaflet.markercluster -->
	<link rel="stylesheet" href="http://igeo.fr/leaflet/plugins/markercluster/MarkerCluster.css" />
	<link rel="stylesheet" href="http://igeo.fr/leaflet/plugins/markercluster/MarkerCluster.Default.css" />

  <style>
      body {
          padding: 0;
          margin: 0;
					background-color :#435a6b;
      }
      html, body, #map {
          height: 100%;
          width: 100%;
      }
  </style>
</head>


<body>
	<!--JS jquery -->
	<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>

	<!--JS Leaflet-->
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	<!--JS Leaflet-MiniMap : https://github.com/Norkart/Leaflet-MiniMap-->
	<script src="http://igeo.fr/leaflet/plugins/MiniMap/Control.MiniMap.js" type="text/javascript"></script>
	<!--JS Leaflet.MousePosition : https://github.com/ardhi/Leaflet.MousePosition-->
	<script src="http://igeo.fr/leaflet/plugins/MousePosition/L.Control.MousePosition.js" type="text/javascript"></script>
	<!--JS Leaflet.GeoSearch : https://github.com/smeijer/L.GeoSearch-->
	<script src="http://igeo.fr/leaflet/plugins/GeoSearch/js/l.control.geosearch.js"></script>
	<script src="http://igeo.fr/leaflet/plugins/GeoSearch/js/l.geosearch.provider.openstreetmap.js"></script>
	<!--JS Leaflet.MarkerCluster : https://github.com/Leaflet/Leaflet.markercluster -->
	<script src="http://igeo.fr/leaflet/plugins/markercluster/leaflet.markercluster-src.js"></script>

	<div id="map"></div>
	<script type="text/javascript">


	// IGN Géoportail Api Key
	//var ignApiKey = "" ;

	// IGN ORTHO
	//var orthoWmtsUrl	= "http://gpp3-wxs.ign.fr/"+ignApiKey + "/wmts?LAYER=ORTHOIMAGERY.ORTHOPHOTOS&EXCEPTIONS=text/xml&FORMAT=image/jpeg&SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&STYLE=normal&TILEMATRIXSET=PM&&TILEMATRIX={z}&TILECOL={x}&TILEROW={y}" ;
	//var ORTHO= L.tileLayer(orthoWmtsUrl, {attribution: '&copy; <a href="http://www.ign.fr/">IGN</a>'});

	// MapBox
	var mapbox   = L.tileLayer('https://b.tiles.mapbox.com/v3/examples.c7d2024a/{z}/{x}/{y}.png', {
	attribution: 'Map tiles by <a href="http://www.mapbox.com/">MapBox</a> &mdash; Map data &copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'});

	//Stamen
	var stamen = L.tileLayer('http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png', {
	attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
	subdomains: 'abcd',	minZoom: 0,	maxZoom: 20	});

	//MapQuest
	var MapQuestOpen_OSM = L.tileLayer('http://otile{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpeg', {
	attribution: 'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
	subdomains: '1234'});

	//OSM
	var OpenStreetMap_Mapnik = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'});

	var baseMap = {"Mapbox": mapbox, "Mapnik": OpenStreetMap_Mapnik,"MapQuest": MapQuestOpen_OSM,"Stamen Toner": stamen};

	//----------------------------------------------------------------------------------------------------------------

	var myIcon = L.icon({
								iconUrl: 'http://www.igeo.fr/map-icons/pins/32/pin2.png',
								iconSize: [24, 24],
								iconAnchor: [12, 24]
								});


$.getJSON('drones.geojson', function(data) {
	var drone = L.geoJson(data, {
		onEachFeature: function (feature, layer) {
			layer.bindPopup('<b>'+feature.properties.NOM +'</b><br>'+ feature.properties.ADRESSE+'<br>'+ feature.properties.VILLE+'<br>'+ feature.properties.PAYS+'<br><a>Site web :</a> <a href=" ' + feature.properties.WEB + '">'+feature.properties.WEB +'</a><br><a style='color:red;'> Vérifié le : </a><a>'+feature.properties.VERIFICATION +'</a>');
			layer.setIcon (layer.options.icon =myIcon);
		}
	});

	var markers = L.markerClusterGroup({spiderfyOnMaxZoom: false, showCoverageOnHover: false, zoomToBoundsOnClick: true});
			markers.addLayer(drone);

	var overlays = {"Exploitants en activités particulières<br>au moyen d'aéronefs télé-pilotés 02/07/2014<br>-> <a href =http://www.developpement-durable.gouv.fr/Quelle-place-pour-les-drones-dans.html>Pour en savoir plus</a> <br><br>-> <a href =https://github.com/igeofr/igeofr.github.io/edit/master/map_drones/>Contribuer et maintenir le fichier</a> <br>-> <a href =http://www.igeo.fr>Signaler une erreur</a>": markers};

//----------------------------------------------------------------------------------------------------------------



	var map = new L.Map('map',
			{center: [46.5, 2.5],
			zoom: 6,
			layers: [mapbox,markers]
	});

	L.control.layers(baseMap,overlays,{ collapsed: true }).addTo(map);



//----------------------------------------------------------------------------------------------------------------

		//Mini Map
		var mapbox2 = new L.TileLayer('https://b.tiles.mapbox.com/v3/examples.c7d2024a/{z}/{x}/{y}.png');
		var miniMap = new L.Control.MiniMap(mapbox2, { toggleDisplay: true}).addTo(map);

		L.control.mousePosition().addTo(map);


//----------------------------------------------------------------------------------------------------------------

		// GeoRecherche
		new L.Control.GeoSearch({
		    provider: new L.GeoSearch.Provider.OpenStreetMap(),
		    position: 'topcenter',
		    showMarker: false
		}).addTo(map);
//----------------------------------------------------------------------------------------------------------------

});


	</script>
</body>
</html>
